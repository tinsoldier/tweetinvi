

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Rate Limits Handlers &mdash; Tweetinvi 5.0.4 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/js/custom.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Rate Limits API" href="rate-limits.html" />
    <link rel="prev" title="Credentials" href="credentials.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Tweetinvi
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">First steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/basic-concepts.html">Basic Concepts</a></li>
</ul>
<p class="caption"><span class="caption-text">Credentials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="credentials.html">Credentials</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Rate Limits Handlers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#default-handler">Default Handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="#track-and-await-handler">Track and Await Handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="#track-only-handler">Track Only Handler</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rate-limits.html">Rate Limits API</a></li>
</ul>
<p class="caption"><span class="caption-text">Twitter API - v1.1</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v1.1/tweets.html">Tweets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v1.1/timelines.html">Timelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v1.1/users.html">Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v1.1/users-followers-friends.html">Followers, Friends and Relationships</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v1.1/messages.html">Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v1.1/search.html">Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v1.1/lists.html">Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v1.1/direct-api-calls.html">Direct API calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v1.1/upload-media.html">Media Upload</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v1.1/iterators.html">Iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v1.1/trends.html">Trends</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v1.1/help.html">Help</a></li>
</ul>
<p class="caption"><span class="caption-text">Twitter API - v2</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v2/basics.html">Basics of API V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v2/tweets.html">Tweets V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v2/users.html">Users V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-api-v2/search.html">Search V2</a></li>
</ul>
<p class="caption"><span class="caption-text">Authentication</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../authentication/authentication.html">Introduction to Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authentication/authentication-url-redirect.html">URL Redirect Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authentication/authentication-pin-code.html">PIN based Authentication</a></li>
</ul>
<p class="caption"><span class="caption-text">Account Activity</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../account-activity/account-activity.html">Account Activity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../account-activity/account-activity-with-aspnet.html">Account Activity - AspNet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../account-activity/account-activity-with-http-server.html">Account Activity - HttpServer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../account-activity/account-activity-subscriptions.html">Account Activity - Subscriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../account-activity/account-activity-events.html">Account Activity - Stream/Events</a></li>
</ul>
<p class="caption"><span class="caption-text">Streams V1.1</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../streams-v1.1/streams-introduction.html">Streams Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../streams-v1.1/tweet-stream.html">Tweet Stream</a></li>
<li class="toctree-l1"><a class="reference internal" href="../streams-v1.1/sample-stream.html">Sample Stream</a></li>
<li class="toctree-l1"><a class="reference internal" href="../streams-v1.1/filtered-stream.html">Filtered Streams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../streams-v1.1/filtered-stream-filters.html">Filtered Stream - Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../streams-v1.1/labs-sample-stream.html">Labs Sample Stream</a></li>
<li class="toctree-l1"><a class="reference internal" href="../streams-v1.1/labs-filtered-stream.html">Labs Filtered Stream</a></li>
</ul>
<p class="caption"><span class="caption-text">Streams V2</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../streams-v2/sample-stream.html">Sample Stream V2</a></li>
</ul>
<p class="caption"><span class="caption-text">Twitter Client</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../twitter-client/twitter-client.html">Twitter Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-client/events.html">Twitter Client - Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter-client/json.html">Json - Serialize/Deserialize</a></li>
</ul>
<p class="caption"><span class="caption-text">Releases</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../more/releases.html">Releases</a></li>
</ul>
<p class="caption"><span class="caption-text">More</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../more/exceptions.html">Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../more/twitter-labs.html">Twitter Labs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../more/extended-tweets.html">Extended Tweets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../more/parameters-validators.html">Parameters Validators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../more/tweetinvi-container.html">Tweetinvi Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../more/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../more/help.html">Help and Feedback</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Tweetinvi</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Rate Limits Handlers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rate-limits-handlers">
<h1>Rate Limits Handlers<a class="headerlink" href="#rate-limits-handlers" title="Permalink to this headline">¶</a></h1>
<p>Application credentials and User credentials can access a variety of endpoints.<br />Each of these endpoints can be accessed a limited number of times.</p>
<blockquote>
<div><p>For example a set of user credentials can perform 180 searches in 15 minutes intervals. If you try to do more than 180 searches in the 15 minutes timeframe the REST API will raise an exception.</p>
</div></blockquote>
<div class="section" id="default-handler">
<h2>Default Handler<a class="headerlink" href="#default-handler" title="Permalink to this headline">¶</a></h2>
<p>By default, a <code class="docutils literal notranslate"><span class="pre">TwitterClient</span></code> do not track the rate limits.<br />It means that when a endpoint is out of limits, executing a request on that endpoint will result in a <code class="docutils literal notranslate"><span class="pre">TwitterException</span></code>.</p>
<p>In this mode you will need to catch <code class="docutils literal notranslate"><span class="pre">TwitterException</span></code> to detect when the rate limits allowances have exhausted.</p>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="k">try</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">tweetinviUser</span> <span class="p">=</span> <span class="k">await</span> <span class="n">userClient</span><span class="p">.</span><span class="n">Users</span><span class="p">.</span><span class="n">GetUserAsync</span><span class="p">(</span><span class="s">&quot;tweetinviapi&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">catch</span> <span class="p">(</span><span class="n">TwitterException</span> <span class="n">e</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">StatusCode</span> <span class="p">==</span> <span class="m">429</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="c1">// Rate limits allowance have been exhausted - do your custom handling</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this mode you will need to use the Rate Limits API.<br />Using <code class="docutils literal notranslate"><span class="pre">GetRateLimitsAsync</span></code>, <code class="docutils literal notranslate"><span class="pre">GetEndpointRateLimitAsync</span></code> and <code class="docutils literal notranslate"><span class="pre">WaitForQueryRateLimitAsync</span></code> should help you handling the rate limits on your own.</p>
<div class="note"><p><a class="reference internal" href="rate-limits.html"><span class="doc">Learn more about the Rate Limits API</span></a></p>
</div></div>
<div class="section" id="track-and-await-handler">
<h2>Track and Await Handler<a class="headerlink" href="#track-and-await-handler" title="Permalink to this headline">¶</a></h2>
<p>When using the <code class="docutils literal notranslate"><span class="pre">TrackAndAwait</span></code> rate limits mode will automatically handle the time when requests are being invoked.</p>
<ul class="simple">
<li><p>Tweetinvi will regularly request twitter for the current state of the credentials rate limits.</p></li>
<li><p>Tweetinvi will perform some offline tracking of the rate limits to optimise the number of calls to twitter.</p></li>
<li><p>When performing a request:</p>
<ul>
<li><p>If the allowance for a specific endpoint <strong>is not empty</strong>, Tweetinvi will run the request immediately.</p></li>
<li><p>If the allowance for a specific endpoint <strong>is empty</strong>, Tweetinvi will automatically wait and schedule when the operation will be executed.</p></li>
</ul>
</li>
</ul>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="c1">// enable track and await</span>
<span class="n">client</span><span class="p">.</span><span class="n">Config</span><span class="p">.</span><span class="n">RateLimitTrackerMode</span> <span class="p">=</span> <span class="n">RateLimitTrackerMode</span><span class="p">.</span><span class="n">TrackAndAwait</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="track-only-handler">
<h2>Track Only Handler<a class="headerlink" href="#track-only-handler" title="Permalink to this headline">¶</a></h2>
<p>When using the <code class="docutils literal notranslate"><span class="pre">TrackOnly</span></code> rate limits mode will automatically handle the time when requests are being invoked.<br /><code class="docutils literal notranslate"><span class="pre">TrackOnly</span></code> works almost like <code class="docutils literal notranslate"><span class="pre">TrackAndAwait</span></code> apart from the fact that it will always execute requests immediately.</p>
<ul class="simple">
<li><p>Tweetinvi will regularly request twitter for the current state of the credentials rate limits.</p></li>
<li><p>Tweetinvi will perform some offline tracking of the rate limits to optimise the number of calls to twitter.</p></li>
<li><p>When performing a request:</p>
<ul>
<li><p>If the allowance for a specific endpoint <strong>is not empty</strong>, Tweetinvi will run the request immediately.</p></li>
<li><p><strong>If the stock of requests for a specific endpoint <strong>is empty</strong>, Tweetinvi will run the request immediately.</strong></p></li>
</ul>
</li>
</ul>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="c1">// enable track only</span>
<span class="n">client</span><span class="p">.</span><span class="n">Config</span><span class="p">.</span><span class="n">RateLimitTrackerMode</span> <span class="p">=</span> <span class="n">RateLimitTrackerMode</span><span class="p">.</span><span class="n">TrackOnly</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rate-limits.html" class="btn btn-neutral float-right" title="Rate Limits API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="credentials.html" class="btn btn-neutral float-left" title="Credentials" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, linvi

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>